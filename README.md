# msys2-gtest (segfault why?)
```
$ ls
README.md  src

$ mkdir b
$ cd b

$ cmake ../src/
-- The C compiler identification is GNU 10.2.0
-- The CXX compiler identification is GNU 10.2.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc.exe - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++.exe - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found Python: /usr/bin/python3.9.exe (found version "3.9.6") found components: Interpreter
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success
-- Found Threads: TRUE
-- Configuring done
-- Generating done
-- Build files have been written to: /home/f.ueberschar/PowerModul-Software/EclipseCDT/workspace/EnEcmoPowerModule/test/software/battery/b

$ make
[ 10%] Building CXX object _deps/googletest-build/googletest/CMakeFiles/gtest.dir/src/gtest-all.cc.o
[ 20%] Linking CXX static library ../../../lib/libgtest.a
[ 20%] Built target gtest
[ 30%] Building CXX object _deps/googletest-build/googlemock/CMakeFiles/gmock.dir/src/gmock-all.cc.o
[ 40%] Linking CXX static library ../../../lib/libgmock.a
[ 40%] Built target gmock
[ 50%] Building CXX object _deps/googletest-build/googlemock/CMakeFiles/gmock_main.dir/src/gmock_main.cc.o
[ 60%] Linking CXX static library ../../../lib/libgmock_main.a
[ 60%] Built target gmock_main
[ 70%] Building CXX object _deps/googletest-build/googletest/CMakeFiles/gtest_main.dir/src/gtest_main.cc.o
[ 80%] Linking CXX static library ../../../lib/libgtest_main.a
[ 80%] Built target gtest_main
[ 90%] Building CXX object CMakeFiles/Battery.dir/main.cc.o
[100%] Linking CXX executable Battery.exe
[100%] Built target Battery

$ ./Battery.exe
Running main() from .. [Uploading Battery.exe.stackdumpâ€¦]()
battery/b/_deps/googletest-src/googletest/src/gtest_main.cc
[==========] Running 2 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 2 tests from Battery
[ RUN      ] Battery.get_remaining_capacity
Segmentation fault (core dumped)
```

```
Exception: STATUS_ACCESS_VIOLATION at rip=0010044D9A2
rax=0000000180163C58 rbx=00000001802C98B0 rcx=0000000180163C50
rdx=0000000000000001 rsi=00000001802C98B0 rdi=0000000000000000
r8 =00000001802C98B0 r9 =00000001802C98B0 r10=0000000100000000
r11=00000005269361F2 r12=0000000000000021 r13=0000000000000000
r14=0000000000000011 r15=0000000000000000
rbp=00000000FFFFC040 rsp=00000000FFFFBFF0
program=battery\b\Battery.exe, pid 8932, thread main
cs=0033 ds=002B es=002B fs=0053 gs=002B ss=002B
Stack trace:
Frame        Function    Args
000FFFFC040  0010044D9A2 (00000000000, 00000000021, 00000000000, 000FFFFC0A0)
000FFFFC070  0010044C479 (001802C98B8, 0080006BB48, 000FFFFC130, 000FFFFC0D0)
000FFFFC0A0  0010044BAD6 (001802C98B0, 000FFFFC0F0, 0052692424E, 000FFFFC100)
000FFFFC0D0  00100446CC0 (001802C98B0, 00800013700, 00000000018, 000FFFFC190)
000FFFFC100  0010042BB60 (001802C98B0, 0080006BB70, 0010043A8A6, 0080006B9E8)
000FFFFC190  0010043A8F5 (0080006BB70, 001802C98B0, 00000000001, 000FFFFC1A0)
000FFFFC170  0010044EBB6 (0080006BB70, 001802C98B0, 00000000001, 0080006B9E8)
000FFFFC1A0  0010045A32C (0080006BB50, 001802C98B0, 00000000000, 000FFFFC220)
000FFFFC1F0  0010045A18F (001802C98B0, 001FFFFC628, 0080006B9F0, 000FFFFC2B0)
000FFFFC280  00100444D64 (001802C98B0, 0080006B9F0, 0080006B9F0, 00000000000)
000FFFFC280  00100459FBF (00000000000, 0080006B9F0, 001802C98B0, 000FFFFC2D8)
000FFFFC310  0010045A279 (0080006B9E8, 001802C98B0, 001004428D5, 000FFFFC420)
000FFFFC350  00100450F5B (0080006B9E8, 001802C98B0, 000FFFFC420, 000FFFFC420)
000FFFFC390  0010042C167 (001802C98B0, 000FFFFC420, 000FFFFC410, 000FFFFC410)
000FFFFC420  00100406A8A (000FFFFC420, 001004690C0, 00800000016, 000FFFFC498)
000FFFFC440  00100431FF5 (001004690C0, 00100000016, 000FFFFC498, 000FFFFC528)
000FFFFC4E0  00100438855 (001004690C0, 00000000016, 001004690B6, 0010046913A)
000FFFFC570  0010042B7DF (0080005B780, 000FFFFC77C, 00000000000, 000FFFFC5F0)
000FFFFC5F0  001004010AF (0010041E560, 000FFFFC7C0, 00100432FA5, 00000000021)
000FFFFC800  0010043781C (00000000000, 0010046C58B, 0000041E560, 00000000021)
000FFFFC850  001004371B0 (0000041E560, 0010046C58B, 0010040F47D, 00000000021)
000FFFFC8A0  0010040FEB9 (17BEEA0DB8C, 0010046C6F8, 00100430C90, 00000000011)
000FFFFC960  00100410755 (00800000000, 0010046C735, 00000000000, 00100439390)
000FFFFC9C0  00100410F2E (00100000000, 00000000000, 00100450C88, 00800012DE8)
000FFFFCA70  0010041E8CE (0010041E560, 000FFFFCAE0, 00100432FA5, 0010041E560)
000FFFFCB20  0010043771C (00000000000, 0010046CFB8, 00000000000, 0010041E560)
000FFFFCB70  00100436D90 (00000000001, 0010046CFB8, 001004346B1, 0010041E560)
000FFFFCC00  0010041D59D (000FFFFCC90, 001802367C0, 000FFFFCC28, 000FFFFCC40)
000FFFFCC10  0010042B745 (000FFFFCC90, 00000000000, 00000000000, 000FFFFCCE0)
000FFFFCC40  00100401C1C (000FFFFCC90, 00180048F00, 00000000000, 00180330BC0)
000FFFFCCE0  0018004A01B (00000000000, 00000000000, 00000000000, 00000000000)
000FFFFCDA0  0018004794A (00000000000, 00000000000, 00000000000, 00000000000)
End of stack trace (more stack frames may be present)
```
